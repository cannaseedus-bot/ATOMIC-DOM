<section class="py-20 sm:py-24">
  <div class="container mx-auto px-6">
    <div class="text-center">
      <h2 class="text-3xl font-bold tracking-tight text-white sm:text-4xl">The Quantum Realization</h2>
      <p class="mt-4 text-lg leading-8 text-slate-300">
        The DOM isn't just a tree, it's a transactional state API. Discover the core principles.
      </p>
    </div>

    <div class="mt-16 max-w-5xl mx-auto">
      <div class="flex flex-col sm:flex-row justify-center border-b border-slate-700 mb-8">
        <button
          (click)="setActiveConcept('blocks')"
          class="flex-1 py-4 px-2 text-center text-lg font-semibold transition-colors duration-300 flex items-center justify-center gap-3"
          [class.text-atomic-primary]="activeConcept() === 'blocks'"
          [class.border-atomic-primary]="activeConcept() === 'blocks'"
          [class.text-slate-400]="activeConcept() !== 'blocks'"
          [class.border-transparent]="activeConcept() !== 'blocks'"
          [class.hover:text-white]="activeConcept() !== 'blocks'"
          [class.border-b-2]="true"
        >
          <span class="text-2xl">‚öõÔ∏è</span>
          <span>Atomic Blocks: Quantum State Machines</span>
        </button>
        <button
          (click)="setActiveConcept('wormholes')"
          class="flex-1 py-4 px-2 text-center text-lg font-semibold transition-colors duration-300 flex items-center justify-center gap-3"
          [class.text-atomic-secondary]="activeConcept() === 'wormholes'"
          [class.border-atomic-secondary]="activeConcept() === 'wormholes'"
          [class.text-slate-400]="activeConcept() !== 'wormholes'"
          [class.border-transparent]="activeConcept() !== 'wormholes'"
          [class.hover:text-white]="activeConcept() !== 'wormholes'"
          [class.border-b-2]="true"
        >
          <span class="text-2xl">üåÄ</span>
          <span>Atomic Wormholes: Quantum State Tunnels</span>
        </button>
      </div>

      <div class="prose prose-invert prose-lg max-w-none">
        @if (activeConcept() === 'blocks') {
          <div class="animate-fade-in">
            <h3 class="text-2xl font-bold text-white">ATOMIC BLOCKS: DISCRETE UNITS OF STATE TRANSITION</h3>
            <p class="text-slate-300">Atomic Blocks guarantee all-or-nothing execution. They're not just code blocks‚Äîthey're quantum state machines that preserve causality and consistency across any system, from UI rendering to distributed databases.</p>
            
            <h4 class="text-xl font-semibold text-white mt-8">The Atomic Guarantee</h4>
            <p class="text-slate-300">An operation is atomic if it is all-or-nothing, isolated, consistent, and durable. Think of a bank transfer: the money must be withdrawn and deposited in a single, unbreakable step. If any part fails, the entire transaction rolls back, leaving the system in its original, valid state.</p>

            <pre class="bg-slate-800 border border-slate-700 rounded-lg"><code class="language-asxr"><span class="text-cyan-400">@atomic</span> <span class="text-emerald-400">dom-update</span> {{ '{' }}
  <span class="text-slate-500">// These DOM changes are batched into a single transaction.</span>
  element.style.width <span class="text-cyan-400">=</span> <span class="text-amber-400">'100px'</span>;
  element.style.height <span class="text-cyan-400">=</span> <span class="text-amber-400">'200px'</span>; 
  element.style.margin <span class="text-cyan-400">=</span> <span class="text-amber-400">'10px'</span>;
{{ '}' }} <span class="text-slate-500">// üéØ All changes apply at once, triggering ONE reflow calculation.</span>
</code></pre>

            <h4 class="text-xl font-semibold text-white mt-8">Error Handling & Rollbacks</h4>
            <p class="text-slate-300">Atomic blocks include powerful constructs for handling failures. If any operation within the block fails, the entire transaction is automatically rolled back, and you can define specific logic to handle the error.</p>

            <pre class="bg-slate-800 border border-slate-700 rounded-lg"><code class="language-asxr"><span class="text-cyan-400">@atomic</span> <span class="text-emerald-400">transfer-funds</span> {{ '{' }}
  <span class="text-slate-500">// Attempt to transfer funds</span>
  accountA.balance <span class="text-cyan-400">-=</span> 100;
  accountB.balance <span class="text-cyan-400">+=</span> 100;
  <span class="text-slate-500">// This might fail due to network or validation errors</span>
{{ '}' }} <span class="text-cyan-400">@on-error</span> {{ '{' }}
  <span class="text-slate-500">// Automatic rollback has already occurred.</span>
  <span class="text-slate-500">// The system is back to its pre-atomic state.</span>
  log.error(<span class="text-amber-400">"Transfer failed, state is safe."</span>);
{{ '}' }}
</code></pre>

            <h4 class="text-xl font-semibold text-white mt-8">Quantum Analogy</h4>
            <p class="text-slate-300">Before an atomic block commits, its operations exist in a superposition of possible outcomes. The moment it commits, the wavefunction collapses into a single reality: either complete success or complete failure. There is no intermediate, "partially updated" state.</p>
            
             <pre class="bg-slate-800 border border-slate-700 rounded-lg"><code class="language-asxr"><span class="text-cyan-400">@atomic</span> {{ '{' }}
  <span class="text-slate-500">// Superposition of all possible outcomes</span>
  |œà‚ü© <span class="text-cyan-400">=</span> Œ±|success‚ü© + Œ≤|failure‚ü©
  
  <span class="text-slate-500">// Measurement (commit) collapses to ONE reality</span>
{{ '}' }}
</code></pre>
            <p class="text-slate-300">This principle transforms unreliable operations into reliable transactions, making complex systems safer and easier to reason about.</p>

          </div>
        }

        @if (activeConcept() === 'wormholes') {
          <div class="animate-fade-in">
            <h3 class="text-2xl font-bold text-white">ATOMIC WORMHOLES: BIDIRECTIONAL QUANTUM TUNNELS</h3>
            <p class="text-slate-300">Atomic Wormholes connect distant state systems while maintaining atomic consistency guarantees. They're not just data pipes‚Äîthey're causality-preserving spacetime bridges for state synchronization.</p>
            
            <h4 class="text-xl font-semibold text-white mt-8">State Teleportation</h4>
            <p class="text-slate-300">A wormhole doesn't "send" data. It creates a quantum entanglement between a source and target state. A change in the source state is instantly reflected in the target state. The state ceases to exist at the source and is reconstructed at the destination, preserving all atomic guarantees.</p>

            <pre class="bg-slate-800 border border-slate-700 rounded-lg"><code class="language-asxr"><span class="text-cyan-400">@wormhole</span> <span class="text-emerald-400">ui-sync</span>: ‚ü® application.state |<span class="text-purple-400">ùíØ</span>| dom.state ‚ü© {{ '{' }}
  <span class="text-slate-500">// ùíØ is a Teleportation operator.</span>
  <span class="text-slate-500">// The application state and DOM state are now entangled.</span>
  <span class="text-emerald-400">protocol</span>: <span class="text-amber-400">"quantum-teleport"</span>,
  <span class="text-emerald-400">consistency</span>: <span class="text-amber-400">"strong"</span>
{{ '}' }}
</code></pre>

            <h4 class="text-xl font-semibold text-white mt-8">The Wormhole Contract</h4>
            <p class="text-slate-300">Every wormhole guarantees that state synchronization is transactional, causality-preserving, and idempotent (safe to retry). This is critical for building reliable real-time applications, offline-first experiences, and distributed systems.</p>

            <pre class="bg-slate-800 border border-slate-700 rounded-lg"><code class="language-asxr"><span class="text-cyan-400">@wormhole-contract</span> {{ '{' }}
  <span class="text-emerald-400">atomic</span>: <span class="text-cyan-400">true</span>,        <span class="text-slate-500">// All-or-nothing sync</span>
  <span class="text-emerald-400">causality</span>: <span class="text-amber-400">"preserved"</span>, <span class="text-slate-500">// Time-ordering is guaranteed</span>
  <span class="text-emerald-400">idempotent</span>: <span class="text-cyan-400">true</span>     <span class="text-slate-500">// Network failures? Just retry.</span>
{{ '}' }}
</code></pre>
            <p class="text-slate-300">With wormholes, you are no longer sending messages; you are teleporting state through quantum tunnels while preserving causality.</p>
          </div>
        }
      </div>
    </div>
  </div>
</section>
